import{_ as H}from"./HeaderItem-C3BiIv3w.js";import{ac as L,G as a,ah as g,aT as f,dg as U,cd as B,ak as D,al as V,an as x,aE as k,ao as G,ad as l,av as t,aM as b,ax as m,ay as s,aN as v,aH as T,aG as _,at as I}from"./_virtual_wxt-plugins-DZjI-rY3.js";import{d as A,b as M}from"./tailwind-Be1c9XZh.js";import{a as $,p as E}from"./challenge-text-COcquVOs.js";import{u as z}from"./useChallengeStore-Cjyjd7K8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./options-CXlWlOx4.js";const Q={class:"italic"},j={class:"cursor-pointer label justify-start mt-2 mb-2"},F={class:"label-text"},W={class:"font-bold text-lg"},X={class:"mt-5 mb-4"},J={class:"mt-4"},K={class:"mt-8"},O=L({__name:"RequireChallenge",setup(R){const o=a("defaultRequireChallengeText"),p=g(()=>decodeURIComponent(o).length),u=z(),{state:c}=f(U),{state:i}=f(B),q=g(()=>u.isShowChallenge),n=D(""),S=g(()=>n.value.length>=p.value);V(i,e=>{e?n.value=decodeURIComponent(e):h()}),h();function h(){(!i.value||i.value=="")&&(n.value=o)}function w(){if(!S.value){alert(a("challengeTextTooShort",[o.length.toString()]));return}if(!$(n.value)){alert(a("notEnoughVariation"));return}i.value=E(n.value),alert(a("requireChallengeTextHasBeenSet")),T.track("CHANGE_TEXT_REQUIRE_CHALLENGE")}function C(){h(),i.value=E(n.value),c.value&&T.track("ENABLE_REQUIRE_CHALLENGE")}function y(){n.value=o,alert(a("requireChallengeTextHasBeenSet"))}function N(){C(),u.showTestChallenge()}return(e,r)=>(k(),x("div",{class:G({"pointer-events-none opacity-50":l(q)})},[t("div",Q,[t("p",null,[m(s(("t"in e?e.t:l(a))("wantToTestRequireChallenge"))+" ",1),t("button",{class:"text-orange-700 underline cursor-pointer",onClick:N,"data-testid":"show-test-challenge"},s(("t"in e?e.t:l(a))("clickHere")),1),r[2]||(r[2]=m(". "))])]),t("label",j,[b(t("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=d=>v(c)?c.value=d:null),onChange:C,class:"checkbox checkbox-sm checkbox-primary mr-2"},null,544),[[A,l(c)]]),t("span",F,s(("t"in e?e.t:l(a))("enableRequireChallenge")),1)]),t("p",W,s(("t"in e?e.t:l(a))("customizeChallengeText")),1),t("p",X,s(("t"in e?e.t:l(a))("enterChallengeText")),1),b(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=d=>v(n)?n.value=d:null),"data-testid":"custom-challenge",class:"textarea textarea-bordered w-full h-32"},null,512),[[M,l(n)]]),t("div",J,[t("button",{class:"btn btn-primary btn-sm uppercase",onClick:w,"data-testid":"set-custom-challenge"},s(("t"in e?e.t:l(a))("setCustomText")),1),t("button",{class:"btn btn-ghost btn-sm uppercase ml-2",onClick:y},s(("t"in e?e.t:l(a))("resetToDefault")),1)]),t("p",K,[t("small",null,s(("t"in e?e.t:l(a))("beWarnedRequireChallenge")),1)])],2))}}),P={class:"flex flex-col"},Y={class:"mt-4"},oe={__name:"require-challenge",setup(R){return(o,p)=>{const u=H;return k(),x("div",P,[_(u,null,{default:I(()=>[m(s(("t"in o?o.t:l(a))("requireChallenge")),1)]),_:1}),t("p",null,s(("t"in o?o.t:l(a))("requireChallengeDescription")),1),t("div",Y,[_(O)])])}}};export{oe as default};
