import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{an as ie,aE as ue,aG as lt,dp as dt,g as se,k as pt,dq as on,i as fe,aZ as oe,aX as ce,aY as le,ah as gt,aB as _t,r as de,T as ht,ca as pe,cb as cn,ak as yt,al as ge,dr as vt,aH as wt}from"./_virtual_wxt-plugins-DZjI-rY3.js";import{u as Tt,a as mt}from"./useShowPairingDialogStore-C9bRg8XT.js";const At={},bt={class:"loader w-12 h-12 border-4 border-primary"};function St(l,h){return ue(),ie("span",bt)}const xt=ae(At,[["render",St],["__scopeId","data-v-7c027716"]]),Ct={},Dt={class:"m-auto text-center"};function Et(l,h){const w=xt;return ue(),ie("div",Dt,[lt(w)])}const Ft=ae(Ct,[["render",Et]]),_e=()=>{const{state:l}=dt(async()=>await se(),void 0,{immediate:!0});return l};var ln={exports:{}};ln.exports;(function(l,h){var w=200,p="Expected a function",y="__lodash_hash_undefined__",v=1,D=2,F=9007199254740991,U="[object Arguments]",J="[object Array]",R="[object Boolean]",Cn="[object Date]",Dn="[object Error]",En="[object Function]",he="[object GeneratorFunction]",W="[object Map]",On="[object Number]",B="[object Object]",Pn="[object Promise]",Gn="[object RegExp]",Y="[object Set]",In="[object String]",Mn="[object Symbol]",dn="[object WeakMap]",Ln="[object ArrayBuffer]",Z="[object DataView]",ye="[object Float32Array]",ve="[object Float64Array]",we="[object Int8Array]",Te="[object Int16Array]",me="[object Int32Array]",Ae="[object Uint8Array]",be="[object Uint8ClampedArray]",Se="[object Uint16Array]",xe="[object Uint32Array]",Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,De=/^\w*$/,Ee=/^\./,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pe=/[\\^$.*+?()[\]{}|]/g,Ge=/\\(\\)?/g,Ie=/^\[object .+?Constructor\]$/,Me=/^(?:0|[1-9]\d*)$/,o={};o[ye]=o[ve]=o[we]=o[Te]=o[me]=o[Ae]=o[be]=o[Se]=o[xe]=!0,o[U]=o[J]=o[Ln]=o[R]=o[Z]=o[Cn]=o[Dn]=o[En]=o[W]=o[On]=o[B]=o[Gn]=o[Y]=o[In]=o[dn]=!1;var Fn=typeof on=="object"&&on&&on.Object===Object&&on,Le=typeof self=="object"&&self&&self.Object===Object&&self,E=Fn||Le||Function("return this")(),Un=h&&!h.nodeType&&h,Rn=Un&&!0&&l&&!l.nodeType&&l,Fe=Rn&&Rn.exports===Un,Bn=Fe&&Fn.process,$n=function(){try{return Bn&&Bn.binding("util")}catch{}}(),Hn=$n&&$n.isTypedArray;function Ue(n,e,r){switch(r.length){case 0:return n.call(e);case 1:return n.call(e,r[0]);case 2:return n.call(e,r[0],r[1]);case 3:return n.call(e,r[0],r[1],r[2])}return n.apply(e,r)}function Kn(n,e){for(var r=-1,t=n?n.length:0,i=Array(t);++r<t;)i[r]=e(n[r],r,n);return i}function Re(n,e){for(var r=-1,t=e.length,i=n.length;++r<t;)n[i+r]=e[r];return n}function Be(n,e){for(var r=-1,t=n?n.length:0;++r<t;)if(e(n[r],r,n))return!0;return!1}function $e(n){return function(e){return e==null?void 0:e[n]}}function He(n,e){var r=n.length;for(n.sort(e);r--;)n[r]=n[r].value;return n}function Ke(n,e){for(var r=-1,t=Array(n);++r<n;)t[r]=e(r);return t}function qn(n){return function(e){return n(e)}}function qe(n,e){return n==null?void 0:n[e]}function pn(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}function Ne(n){var e=-1,r=Array(n.size);return n.forEach(function(t,i){r[++e]=[i,t]}),r}function Qe(n,e){return function(r){return n(e(r))}}function Xe(n){var e=-1,r=Array(n.size);return n.forEach(function(t){r[++e]=t}),r}var Je=Array.prototype,We=Function.prototype,z=Object.prototype,gn=E["__core-js_shared__"],Nn=function(){var n=/[^.]+$/.exec(gn&&gn.keys&&gn.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Qn=We.toString,A=z.hasOwnProperty,$=z.toString,Ye=RegExp("^"+Qn.call(A).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=E.Symbol,Xn=E.Uint8Array,Ze=z.propertyIsEnumerable,ze=Je.splice,Jn=V?V.isConcatSpreadable:void 0,Ve=Qe(Object.keys,Object),Wn=Math.max,_n=H(E,"DataView"),K=H(E,"Map"),hn=H(E,"Promise"),yn=H(E,"Set"),vn=H(E,"WeakMap"),q=H(Object,"create"),je=M(_n),ke=M(K),nr=M(hn),er=M(yn),rr=M(vn),j=V?V.prototype:void 0,wn=j?j.valueOf:void 0,Yn=j?j.toString:void 0;function I(n){var e=-1,r=n?n.length:0;for(this.clear();++e<r;){var t=n[e];this.set(t[0],t[1])}}function tr(){this.__data__=q?q(null):{}}function ar(n){return this.has(n)&&delete this.__data__[n]}function ir(n){var e=this.__data__;if(q){var r=e[n];return r===y?void 0:r}return A.call(e,n)?e[n]:void 0}function ur(n){var e=this.__data__;return q?e[n]!==void 0:A.call(e,n)}function sr(n,e){var r=this.__data__;return r[n]=q&&e===void 0?y:e,this}I.prototype.clear=tr,I.prototype.delete=ar,I.prototype.get=ir,I.prototype.has=ur,I.prototype.set=sr;function b(n){var e=-1,r=n?n.length:0;for(this.clear();++e<r;){var t=n[e];this.set(t[0],t[1])}}function fr(){this.__data__=[]}function or(n){var e=this.__data__,r=nn(e,n);if(r<0)return!1;var t=e.length-1;return r==t?e.pop():ze.call(e,r,1),!0}function cr(n){var e=this.__data__,r=nn(e,n);return r<0?void 0:e[r][1]}function lr(n){return nn(this.__data__,n)>-1}function dr(n,e){var r=this.__data__,t=nn(r,n);return t<0?r.push([n,e]):r[t][1]=e,this}b.prototype.clear=fr,b.prototype.delete=or,b.prototype.get=cr,b.prototype.has=lr,b.prototype.set=dr;function S(n){var e=-1,r=n?n.length:0;for(this.clear();++e<r;){var t=n[e];this.set(t[0],t[1])}}function pr(){this.__data__={hash:new I,map:new(K||b),string:new I}}function gr(n){return en(this,n).delete(n)}function _r(n){return en(this,n).get(n)}function hr(n){return en(this,n).has(n)}function yr(n,e){return en(this,n).set(n,e),this}S.prototype.clear=pr,S.prototype.delete=gr,S.prototype.get=_r,S.prototype.has=hr,S.prototype.set=yr;function k(n){var e=-1,r=n?n.length:0;for(this.__data__=new S;++e<r;)this.add(n[e])}function vr(n){return this.__data__.set(n,y),this}function wr(n){return this.__data__.has(n)}k.prototype.add=k.prototype.push=vr,k.prototype.has=wr;function x(n){this.__data__=new b(n)}function Tr(){this.__data__=new b}function mr(n){return this.__data__.delete(n)}function Ar(n){return this.__data__.get(n)}function br(n){return this.__data__.has(n)}function Sr(n,e){var r=this.__data__;if(r instanceof b){var t=r.__data__;if(!K||t.length<w-1)return t.push([n,e]),this;r=this.__data__=new S(t)}return r.set(n,e),this}x.prototype.clear=Tr,x.prototype.delete=mr,x.prototype.get=Ar,x.prototype.has=br,x.prototype.set=Sr;function xr(n,e){var r=P(n)||Sn(n)?Ke(n.length,String):[],t=r.length,i=!!t;for(var a in n)A.call(n,a)&&!(i&&(a=="length"||mn(a,t)))&&r.push(a);return r}function nn(n,e){for(var r=n.length;r--;)if(bn(n[r][0],e))return r;return-1}var Cr=Wr(Or);function Dr(n,e,r,t,i){var a=-1,u=n.length;for(r||(r=kr),i||(i=[]);++a<u;){var f=n[a];r(f)?Re(i,f):i[i.length]=f}return i}var Er=Yr();function Or(n,e){return n&&Er(n,e,un)}function Zn(n,e){e=rn(e,n)?[e]:zn(e);for(var r=0,t=e.length;n!=null&&r<t;)n=n[tn(e[r++])];return r&&r==t?n:void 0}function Pr(n){return $.call(n)}function Gr(n,e){return n!=null&&e in Object(n)}function Tn(n,e,r,t,i){return n===e?!0:n==null||e==null||!Q(n)&&!an(e)?n!==n&&e!==e:Ir(n,e,Tn,r,t,i)}function Ir(n,e,r,t,i,a){var u=P(n),f=P(e),s=J,c=J;u||(s=O(n),s=s==U?B:s),f||(c=O(e),c=c==U?B:c);var g=s==B&&!pn(n),_=c==B&&!pn(e),d=s==c;if(d&&!g)return a||(a=new x),u||ut(n)?Vn(n,e,r,t,i,a):Zr(n,e,s,r,t,i,a);if(!(i&D)){var T=g&&A.call(n,"__wrapped__"),m=_&&A.call(e,"__wrapped__");if(T||m){var G=T?n.value():n,C=m?e.value():e;return a||(a=new x),r(G,C,t,i,a)}}return d?(a||(a=new x),zr(n,e,r,t,i,a)):!1}function Mr(n,e,r,t){var i=r.length,a=i;if(n==null)return!a;for(n=Object(n);i--;){var u=r[i];if(u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++i<a;){u=r[i];var f=u[0],s=n[f],c=u[1];if(u[2]){if(s===void 0&&!(f in n))return!1}else{var g=new x,_;if(!(_===void 0?Tn(c,s,t,v|D,g):_))return!1}}return!0}function Lr(n){if(!Q(n)||et(n))return!1;var e=ee(n)||pn(n)?Ye:Ie;return e.test(M(n))}function Fr(n){return an(n)&&xn(n.length)&&!!o[$.call(n)]}function Ur(n){return typeof n=="function"?n:n==null?re:typeof n=="object"?P(n)?Hr(n[0],n[1]):$r(n):ct(n)}function Rr(n){if(!rt(n))return Ve(n);var e=[];for(var r in Object(n))A.call(n,r)&&r!="constructor"&&e.push(r);return e}function Br(n,e){var r=-1,t=N(n)?Array(n.length):[];return Cr(n,function(i,a,u){t[++r]=e(i,a,u)}),t}function $r(n){var e=Vr(n);return e.length==1&&e[0][2]?ne(e[0][0],e[0][1]):function(r){return r===n||Mr(r,n,e)}}function Hr(n,e){return rn(n)&&kn(e)?ne(tn(n),e):function(r){var t=ft(r,n);return t===void 0&&t===e?ot(r,n):Tn(e,t,void 0,v|D)}}function Kr(n,e,r){var t=-1;e=Kn(e.length?e:[re],qn(Ur));var i=Br(n,function(a,u,f){var s=Kn(e,function(c){return c(a)});return{criteria:s,index:++t,value:a}});return He(i,function(a,u){return Jr(a,u,r)})}function qr(n){return function(e){return Zn(e,n)}}function Nr(n,e){return e=Wn(e===void 0?n.length-1:e,0),function(){for(var r=arguments,t=-1,i=Wn(r.length-e,0),a=Array(i);++t<i;)a[t]=r[e+t];t=-1;for(var u=Array(e+1);++t<e;)u[t]=r[t];return u[e]=a,Ue(n,this,u)}}function Qr(n){if(typeof n=="string")return n;if(X(n))return Yn?Yn.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function zn(n){return P(n)?n:tt(n)}function Xr(n,e){if(n!==e){var r=n!==void 0,t=n===null,i=n===n,a=X(n),u=e!==void 0,f=e===null,s=e===e,c=X(e);if(!f&&!c&&!a&&n>e||a&&u&&s&&!f&&!c||t&&u&&s||!r&&s||!i)return 1;if(!t&&!a&&!c&&n<e||c&&r&&i&&!t&&!a||f&&r&&i||!u&&i||!s)return-1}return 0}function Jr(n,e,r){for(var t=-1,i=n.criteria,a=e.criteria,u=i.length,f=r.length;++t<u;){var s=Xr(i[t],a[t]);if(s){if(t>=f)return s;var c=r[t];return s*(c=="desc"?-1:1)}}return n.index-e.index}function Wr(n,e){return function(r,t){if(r==null)return r;if(!N(r))return n(r,t);for(var i=r.length,a=-1,u=Object(r);++a<i&&t(u[a],a,u)!==!1;);return r}}function Yr(n){return function(e,r,t){for(var i=-1,a=Object(e),u=t(e),f=u.length;f--;){var s=u[++i];if(r(a[s],s,a)===!1)break}return e}}function Vn(n,e,r,t,i,a){var u=i&D,f=n.length,s=e.length;if(f!=s&&!(u&&s>f))return!1;var c=a.get(n);if(c&&a.get(e))return c==e;var g=-1,_=!0,d=i&v?new k:void 0;for(a.set(n,e),a.set(e,n);++g<f;){var T=n[g],m=e[g];if(t)var G=u?t(m,T,g,e,n,a):t(T,m,g,n,e,a);if(G!==void 0){if(G)continue;_=!1;break}if(d){if(!Be(e,function(C,L){if(!d.has(L)&&(T===C||r(T,C,t,i,a)))return d.add(L)})){_=!1;break}}else if(!(T===m||r(T,m,t,i,a))){_=!1;break}}return a.delete(n),a.delete(e),_}function Zr(n,e,r,t,i,a,u){switch(r){case Z:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Ln:return!(n.byteLength!=e.byteLength||!t(new Xn(n),new Xn(e)));case R:case Cn:case On:return bn(+n,+e);case Dn:return n.name==e.name&&n.message==e.message;case Gn:case In:return n==e+"";case W:var f=Ne;case Y:var s=a&D;if(f||(f=Xe),n.size!=e.size&&!s)return!1;var c=u.get(n);if(c)return c==e;a|=v,u.set(n,e);var g=Vn(f(n),f(e),t,i,a,u);return u.delete(n),g;case Mn:if(wn)return wn.call(n)==wn.call(e)}return!1}function zr(n,e,r,t,i,a){var u=i&D,f=un(n),s=f.length,c=un(e),g=c.length;if(s!=g&&!u)return!1;for(var _=s;_--;){var d=f[_];if(!(u?d in e:A.call(e,d)))return!1}var T=a.get(n);if(T&&a.get(e))return T==e;var m=!0;a.set(n,e),a.set(e,n);for(var G=u;++_<s;){d=f[_];var C=n[d],L=e[d];if(t)var te=u?t(L,C,d,e,n,a):t(C,L,d,n,e,a);if(!(te===void 0?C===L||r(C,L,t,i,a):te)){m=!1;break}G||(G=d=="constructor")}if(m&&!G){var sn=n.constructor,fn=e.constructor;sn!=fn&&"constructor"in n&&"constructor"in e&&!(typeof sn=="function"&&sn instanceof sn&&typeof fn=="function"&&fn instanceof fn)&&(m=!1)}return a.delete(n),a.delete(e),m}function en(n,e){var r=n.__data__;return nt(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Vr(n){for(var e=un(n),r=e.length;r--;){var t=e[r],i=n[t];e[r]=[t,i,kn(i)]}return e}function H(n,e){var r=qe(n,e);return Lr(r)?r:void 0}var O=Pr;(_n&&O(new _n(new ArrayBuffer(1)))!=Z||K&&O(new K)!=W||hn&&O(hn.resolve())!=Pn||yn&&O(new yn)!=Y||vn&&O(new vn)!=dn)&&(O=function(n){var e=$.call(n),r=e==B?n.constructor:void 0,t=r?M(r):void 0;if(t)switch(t){case je:return Z;case ke:return W;case nr:return Pn;case er:return Y;case rr:return dn}return e});function jr(n,e,r){e=rn(e,n)?[e]:zn(e);for(var t,i=-1,u=e.length;++i<u;){var a=tn(e[i]);if(!(t=n!=null&&r(n,a)))break;n=n[a]}if(t)return t;var u=n?n.length:0;return!!u&&xn(u)&&mn(a,u)&&(P(n)||Sn(n))}function kr(n){return P(n)||Sn(n)||!!(Jn&&n&&n[Jn])}function mn(n,e){return e=e??F,!!e&&(typeof n=="number"||Me.test(n))&&n>-1&&n%1==0&&n<e}function jn(n,e,r){if(!Q(r))return!1;var t=typeof e;return(t=="number"?N(r)&&mn(e,r.length):t=="string"&&e in r)?bn(r[e],n):!1}function rn(n,e){if(P(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||X(n)?!0:De.test(n)||!Ce.test(n)||e!=null&&n in Object(e)}function nt(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function et(n){return!!Nn&&Nn in n}function rt(n){var e=n&&n.constructor,r=typeof e=="function"&&e.prototype||z;return n===r}function kn(n){return n===n&&!Q(n)}function ne(n,e){return function(r){return r==null?!1:r[n]===e&&(e!==void 0||n in Object(r))}}var tt=An(function(n){n=st(n);var e=[];return Ee.test(n)&&e.push(""),n.replace(Oe,function(r,t,i,a){e.push(i?a.replace(Ge,"$1"):t||r)}),e});function tn(n){if(typeof n=="string"||X(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function M(n){if(n!=null){try{return Qn.call(n)}catch{}try{return n+""}catch{}}return""}var at=Nr(function(n,e){if(n==null)return[];var r=e.length;return r>1&&jn(n,e[0],e[1])?e=[]:r>2&&jn(e[0],e[1],e[2])&&(e=[e[0]]),Kr(n,Dr(e),[])});function An(n,e){if(typeof n!="function"||e&&typeof e!="function")throw new TypeError(p);var r=function(){var t=arguments,i=e?e.apply(this,t):t[0],a=r.cache;if(a.has(i))return a.get(i);var u=n.apply(this,t);return r.cache=a.set(i,u),u};return r.cache=new(An.Cache||S),r}An.Cache=S;function bn(n,e){return n===e||n!==n&&e!==e}function Sn(n){return it(n)&&A.call(n,"callee")&&(!Ze.call(n,"callee")||$.call(n)==U)}var P=Array.isArray;function N(n){return n!=null&&xn(n.length)&&!ee(n)}function it(n){return an(n)&&N(n)}function ee(n){var e=Q(n)?$.call(n):"";return e==En||e==he}function xn(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=F}function Q(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function an(n){return!!n&&typeof n=="object"}function X(n){return typeof n=="symbol"||an(n)&&$.call(n)==Mn}var ut=Hn?qn(Hn):Fr;function st(n){return n==null?"":Qr(n)}function ft(n,e,r){var t=n==null?void 0:Zn(n,e);return t===void 0?r:t}function ot(n,e){return n!=null&&jr(n,e,Gr)}function un(n){return N(n)?xr(n):Rr(n)}function re(n){return n}function ct(n){return rn(n)?$e(tn(n)):qr(n)}l.exports=at})(ln,ln.exports);var Ot=ln.exports;const Pt=pt(Ot);function Ut(l){const h=fe(),w=de(),p=_e(),y=oe(async()=>await w.canUploadData()&&!!p.value),v=ce({queryKey:[le.Devices,l],queryFn:async()=>l.value?await h.listDeviceGroupDevices({deviceGroupKey:l.value.key}):[],placeholderData:[],enabled:y.value}),D=gt(()=>{if(v.data.value==null)return v.data.value;const F=[..._t(v.data.value)],U=F.findIndex(R=>R.install_id===p.value);return[...F.splice(U,1),...Pt(F,({name:R})=>R.toLowerCase())]});return{...v,devices:D}}function Gt(){const l=ht.Second*3,h=fe(),w=de(),p=_e(),y=oe(async()=>await w.canUploadData()&&!!p.value);return ce({queryKey:[le.DeviceGroup],queryFn:async()=>await h.getMyDeviceGroup({installId:await se()}).catch(()=>null)??null,enabled:y.value,staleTime:l,refetchInterval:l})}function Rt(){const{deviceGroup:l}=pe(cn()),{kickedFromGroup:h}=cn(),{data:w}=Gt();let p=yt();return p=w,ge(w,async y=>{l.value&&(p.value=l.value),y==null?(vt("[Device group] The current device was kicked from group"),await h(),p.value=null):(l.value==null||l.value.key!==y.key)&&(p.value=y)}),{remoteDeviceGroup:p}}function Bt(l){const{deviceGroup:h}=pe(cn()),{setDeviceGroup:w}=cn(),p=Tt(),y=mt();ge(l,async v=>{v&&!h.value&&(await w(v),y.hide(),p.show({}),wt.track("SUCCESSFUL_PAIRING_DEVICE"))})}export{Ft as _,_e as a,Rt as b,Bt as c,Ut as u};
