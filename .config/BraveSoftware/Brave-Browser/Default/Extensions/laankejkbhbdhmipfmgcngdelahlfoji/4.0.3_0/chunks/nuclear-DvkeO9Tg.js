import{_ as le}from"./InputTime.vue_vue_type_script_setup_true_lang-BKgXBCSk.js";import{ac as P,aT as G,I as Y,ah as C,an as $,au as U,ad as e,aE as S,av as l,aG as D,ax as V,ay as n,G as t,dc as ae,dd as te,J as b,cY as j,de as k,al as se,ak as w,N as I,df as f,K as B,aw as oe,aq as ne,at as z,aM as d,aN as c,ao as ie,cX as ue,C as re,P as H,aH as de,T as L,M as ce,c_ as me}from"./_virtual_wxt-plugins-DZjI-rY3.js";import{B as pe}from"./bin-Fh_MlTbd.js";import{_ as _e}from"./Alert.vue_vue_type_script_setup_true_lang-f_OBNziH.js";import{u as ve}from"./useAddTimerMutation-Dxk0NXmt.js";import{u as be}from"./useGetNuclearTimerQuery-C0YoNoTy.js";import{g as T,d as q,b as Q}from"./tailwind-Be1c9XZh.js";import{_ as ye}from"./HeaderItem-C3BiIv3w.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useMutation-RL6hm5Ow.js";const Te={key:0,class:"flex p-4 border bg-sky-200 border-sky-500 rounded-xl my-3 items-center"},he=P({__name:"NuclearQueue",props:{isActive:{type:Boolean}},setup(A){const{state:v}=G(Y),y=C(()=>{var u;return((u=v.value)==null?void 0:u.startType)==b.SpecificTime&&v.value.startTime?`${j(v.value.startTime.hours)}:${j(v.value.startTime.minutes)}`:""}),N=C(()=>{var u,i,h;if(((u=v.value)==null?void 0:u.blockType)==k.All)return t("nuclear_blockedType_All");if(((i=v.value)==null?void 0:i.blockType)==k.AllExceptAllowed)return t("nuclear_blockedType_AllExceptAllowed");if(((h=v.value)==null?void 0:h.blockType)==k.BlockedSites)return t("nuclear_blockedType_BlockedSites")});function p(){v.value=null}return(u,i)=>e(v)&&!u.isActive?(S(),$("div",Te,[l("div",null,[V(n(("t"in u?u.t:e(t))("nuclearOptionWillBeStart"))+" "+n(("t"in u?u.t:e(t))("nuclear_for"))+" ",1),l("b",null,n(e(N))+" "+n(e(ae)(e(v).startType))+" "+n(e(y))+" "+n(e(te)(e(v).frequency)),1)]),D(e(pe),{class:"ml-2 h-6 w-6 text-error cursor-pointer",onClick:p})])):U("",!0)}}),ke={class:"font-semibold text-lg"},ge={class:"ml-3 mt-3"},we={class:"label justify-start gap-3"},Ae=["value"],Me={class:"label-text"},Se={class:"label justify-start gap-3"},Be=["value"],$e={class:"label-text"},Ne={class:"label justify-start gap-3"},Ee=["value"],Ue={class:"label-text"},Ve={class:"mt-3"},je={class:"font-semibold text-lg"},Ie={class:"ml-3 mt-3"},Ce={class:"label justify-start gap-3"},De=["value"],Oe={class:"label-text"},xe={class:"label justify-start gap-3"},qe=["value"],Fe={class:"label-text"},Le={key:0,class:"ml-3"},We={class:"label justify-start gap-3"},Re=["value"],He={class:"label-text"},Qe={class:"label justify-start gap-3"},Pe=["value"],Ge={class:"label-text"},Ye={class:"label justify-start gap-3"},ze=["value"],Je={class:"label-text"},Ke={class:"label justify-start gap-3"},Xe=["value"],Ze={class:"label-text"},el={class:"mt-3"},ll={class:"font-semibold text-lg"},al={class:"ml-3 mt-3"},tl={class:"join"},sl={class:"ml-3"},ol={class:"rounded-none mx-2"},nl={class:"rounded-none mx-2"},il={class:"mt-3"},ul={class:"font-semibold text-lg"},rl={class:"ml-3 mt-3"},dl={class:"label justify-start gap-3"},cl=["value"],ml={class:"label-text"},pl={class:"label justify-start gap-3"},_l=["value"],vl={class:"label-text"},bl={class:"label justify-start gap-3",id:"nuclearOptionSpecificTime"},yl=["value"],fl={class:"label-text"},Tl={key:0,class:"join mt-3"},hl={key:0,class:"mt-3"},kl={class:"font-semibold text-lg"},gl={class:"ml-3 mt-3"},wl={class:"label justify-start gap-3"},Al=["value"],Ml={class:"label-text"},Sl={class:"label justify-start gap-3"},Bl=["value"],$l={class:"label-text"},Nl={class:"label justify-start gap-3"},El=["value"],Ul={class:"label-text"},Vl={class:"label justify-start gap-3"},jl=["value"],Il={class:"label-text"},Cl={class:"mb-0 mt-5"},Dl={key:0,class:"btn cursor-pointer w-36 p-1 nuclear-stripe"},Ol=P({__name:"NuclearOption",setup(A){const v=ve(),{data:y}=be(),{state:N}=G(Y);se(y,()=>{var a;if(y.value&&y.value.timer.options){const s=y.value.timer.options;p.value=s.blockType,u.value=s.contentType,i.value=s.startType,r.value=s.smartBomb,s.startTime&&(g.value=s.startTime,F.value=`${j(s.startTime.hours,!0)}:${j((a=s.startTime)==null?void 0:a.minutes)}`),_.value=s.frequency;const E=me(s.blockTime);h.value=E.hours,M.value=E.minutes}});const p=w(k.BlockedSites),u=w(I.WholeSite),i=w(b.Now),h=w(1),M=w(0),r=w([f.Multimedia,f.Logins,f.Images,f.Forms]),F=w("12:00"),g=w({hours:12,minutes:0}),_=w(B.Today),W=C(()=>h.value*L.Hour+M.value*L.Minute),O=C(()=>y.value!=null),R=C(()=>y.value?new Date(y.value.timer.startTime+y.value.timer.allowedTimeMs).toLocaleString():null);function J(a){a.target.value>59&&(M.value=59)}function K(a){g.value=a}async function X(){if(Z()){const a={blockType:p.value,contentType:u.value,smartBomb:Array.from(r.value),blockTime:W.value,startType:i.value,frequency:_.value,startTime:g.value?g.value:ue(F.value)};alert(t("nuclear_commencingNuclearOption")),i.value==b.Now?(v.mutate({timer:{id:H,name:H,allowedTimeMs:W.value,type:re.Nuclear,startTime:Date.now(),options:a,isEnabled:!0,isSynced:!1}}),N.value=null):N.value=a,de.track("START_NUCLEAR_OPTION",{blocked_items:a.blockType,what_to_block:a.contentType,length:(a.blockTime/L.Minute).toString(),when_to_block:a.startType})}}function Z(){const a=ee();return confirm(a)}function ee(){var x;const a=new Date().getDay(),s=_.value!=B.EveryWeekday||a>0&&a<6,E=i.value==b.SpecificTime&&s&&g.value&&ce(g.value);let m=t("nuclear_stayFocusdWillBlock");if(u.value===I.SmartBomb){const o=[];r.value.includes(f.Multimedia)&&o.push(t("nuclear_smartBombMultimedia_Multimedia")),r.value.includes(f.Forms)&&o.push(t("nuclear_smartBombMultimedia_Forms")),r.value.includes(f.Logins)&&o.push(t("nuclear_smartBombMultimedia_Logins")),r.value.includes(f.Images)&&o.push(t("nuclear_smartBombMultimedia_Images")),m+=` ${o.join("/")} ${t("nuclear_for")} `}return p.value==k.All&&(m+=` ${t("nuclear_blockedType_All")}`),p.value==k.AllExceptAllowed&&(m+=` ${t("nuclear_blockedType_AllExceptAllowed")}`),p.value==k.BlockedSites&&(m+=` ${t("nuclear_blockedType_BlockedSites")}`),m+=` ${t("nuclear_for")} ${h.value?h.value:0} ${t("nuclear_hourOrMore")} ${M.value?M.value:0} ${t("nuclear_minOrMore")}`,i.value==b.Now&&(m+=` ${t("nuclear_startTime_Now")}`),i.value==b.MaxTimeAllowedExceeded&&(m+=` ${t("nuclear_startTime_MaxTimeAllowedExceeded")}`),i.value==b.SpecificTime&&g.value&&(m+=` ${t("nuclear_atTime")} ${j(g.value.hours)}:${j((x=g.value)==null?void 0:x.minutes)}`),_.value==B.ActiveDays?m+=` ${t("nuclear_onActiveDays")}.`:i.value!=b.Now?m+=".":m+=s?` ${t("nuclear_today")}.`:` ${t("nuclear_onMonday")}.`,E?m+=`

${t("nuclear_selectedTimeHasPassed")} ${t("nuclear_nuclearOptionImmediately")}`:i.value==b.MaxTimeAllowedExceeded&&(m+=`

${t("nuclear_maxTimeHasBeenExceeded")} ${t("nuclear_nuclearOptionImmediately")}`),m+=`

 ${t("areYouSure")}`,m}return(a,s)=>{const E=_e,m=he,x=le;return S(),$(oe,null,[e(O)&&e(R)?(S(),ne(E,{key:0,type:"error"},{default:z(()=>[V(n(("t"in a?a.t:e(t))("nuclearIsActiveUntil",e(R))),1)]),_:1})):U("",!0),D(m,{"is-active":e(O)},null,8,["is-active"]),l("div",{class:ie(["rounded-md p-5 mt-4 border border-neutral",{"pointer-events-none opacity-50":e(O)}])},[l("div",null,[l("p",ke,n(("t"in a?a.t:e(t))("nuclear_whichSites")),1),l("div",ge,[l("label",we,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"blockedType",value:e(k).BlockedSites,"onUpdate:modelValue":s[0]||(s[0]=o=>c(p)?p.value=o:null)},null,8,Ae),[[T,e(p)]]),l("span",Me,n(("t"in a?a.t:e(t))("nuclear_blockedType_BlockedSites")),1)]),l("label",Se,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"blockedType",value:e(k).AllExceptAllowed,"onUpdate:modelValue":s[1]||(s[1]=o=>c(p)?p.value=o:null)},null,8,Be),[[T,e(p)]]),l("span",$e,n(("t"in a?a.t:e(t))("nuclear_blockedType_AllExceptAllowed")),1)]),l("label",Ne,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"blockedType",value:e(k).All,"onUpdate:modelValue":s[2]||(s[2]=o=>c(p)?p.value=o:null)},null,8,Ee),[[T,e(p)]]),l("span",Ue,n(("t"in a?a.t:e(t))("nuclear_blockedType_All")),1)])])]),l("div",Ve,[l("p",je,n(("t"in a?a.t:e(t))("nuclear_whatBlock")),1),l("div",Ie,[l("label",Ce,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"blockedContent",value:e(I).WholeSite,"onUpdate:modelValue":s[3]||(s[3]=o=>c(u)?u.value=o:null)},null,8,De),[[T,e(u)]]),l("span",Oe,n(("t"in a?a.t:e(t))("nuclear_blockedContent_WholeSite")),1)]),l("label",xe,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"blockedContent",value:e(I).SmartBomb,"onUpdate:modelValue":s[4]||(s[4]=o=>c(u)?u.value=o:null)},null,8,qe),[[T,e(u)]]),l("span",Fe,n(("t"in a?a.t:e(t))("nuclear_blockedContent_SmartBomb")),1)]),e(u)==e(I).SmartBomb?(S(),$("div",Le,[l("label",We,[d(l("input",{type:"checkbox",class:"checkbox checkbox-xs checkbox-primary",name:"multimedia",value:e(f).Multimedia,"onUpdate:modelValue":s[5]||(s[5]=o=>c(r)?r.value=o:null)},null,8,Re),[[q,e(r)]]),l("span",He,[l("b",null,n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Multimedia")),1),V(" "+n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Multimedia_description")),1)])]),l("label",Qe,[d(l("input",{type:"checkbox",class:"checkbox checkbox-xs checkbox-primary",name:"forms",value:e(f).Forms,"onUpdate:modelValue":s[6]||(s[6]=o=>c(r)?r.value=o:null)},null,8,Pe),[[q,e(r)]]),l("span",Ge,[l("b",null,n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Forms")),1),V(" "+n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Forms_description")),1)])]),l("label",Ye,[d(l("input",{type:"checkbox",class:"checkbox checkbox-xs checkbox-primary",name:"logins",value:e(f).Logins,"onUpdate:modelValue":s[7]||(s[7]=o=>c(r)?r.value=o:null)},null,8,ze),[[q,e(r)]]),l("span",Je,[l("b",null,n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Logins")),1),V(" "+n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Logins_description")),1)])]),l("label",Ke,[d(l("input",{type:"checkbox",class:"checkbox checkbox-xs checkbox-primary",name:"images",value:e(f).Images,"onUpdate:modelValue":s[8]||(s[8]=o=>c(r)?r.value=o:null)},null,8,Xe),[[q,e(r)]]),l("span",Ze,[l("b",null,n(("t"in a?a.t:e(t))("nuclear_smartBombMultimedia_Images")),1)])])])):U("",!0)])]),l("div",el,[l("p",ll,n(("t"in a?a.t:e(t))("nuclear_howLong")),1),l("div",al,[l("div",tl,[l("div",sl,[d(l("input",{type:"number",min:"0","onUpdate:modelValue":s[9]||(s[9]=o=>c(h)?h.value=o:null),"data-testid":"maxTimeAllowedInHoursForAllSites",class:"input input-bordered input-sm w-24"},null,512),[[Q,e(h)]]),l("span",ol,n(("t"in a?a.t:e(t))("hr")),1),d(l("input",{type:"number",min:"0",max:"59",onInput:J,"onUpdate:modelValue":s[10]||(s[10]=o=>c(M)?M.value=o:null),"data-testid":"maxTimeAllowedInMinutesForAllSites",class:"input input-bordered input-sm w-24"},null,544),[[Q,e(M)]]),l("span",nl,n(("t"in a?a.t:e(t))("min")),1)])])])]),l("div",il,[l("p",ul,n(("t"in a?a.t:e(t))("nuclear_startingWhen")),1),l("div",rl,[l("label",dl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"startTime",value:e(b).Now,"onUpdate:modelValue":s[11]||(s[11]=o=>c(i)?i.value=o:null)},null,8,cl),[[T,e(i)]]),l("span",ml,n(("t"in a?a.t:e(t))("nuclear_startTime_Now")),1)]),l("label",pl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"startTime",value:e(b).MaxTimeAllowedExceeded,"onUpdate:modelValue":s[12]||(s[12]=o=>c(i)?i.value=o:null)},null,8,_l),[[T,e(i)]]),l("span",vl,n(("t"in a?a.t:e(t))("nuclear_startTime_MaxTimeAllowedExceeded")),1)]),l("label",bl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"startTime",value:e(b).SpecificTime,"onUpdate:modelValue":s[13]||(s[13]=o=>c(i)?i.value=o:null)},null,8,yl),[[T,e(i)]]),l("span",fl,n(("t"in a?a.t:e(t))("nuclear_startTime_SpecificTime")),1)]),e(i)==e(b).SpecificTime?(S(),$("div",Tl,[D(x,{time:e(F),onSetTime:K},null,8,["time"])])):U("",!0)])]),e(i)!=e(b).Now?(S(),$("div",hl,[l("p",kl,n(("t"in a?a.t:e(t))("howOffen")),1),l("div",gl,[l("label",wl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"frequency",value:e(B).Today,"onUpdate:modelValue":s[14]||(s[14]=o=>c(_)?_.value=o:null)},null,8,Al),[[T,e(_)]]),l("span",Ml,n(("t"in a?a.t:e(t))("todayOnly")),1)]),l("label",Sl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"frequency",value:e(B).ActiveDays,"onUpdate:modelValue":s[15]||(s[15]=o=>c(_)?_.value=o:null)},null,8,Bl),[[T,e(_)]]),l("span",$l,n(("t"in a?a.t:e(t))("daysInActiveDaysTab")),1)]),l("label",Nl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"frequency",value:e(B).EveryWeekday,"onUpdate:modelValue":s[16]||(s[16]=o=>c(_)?_.value=o:null)},null,8,El),[[T,e(_)]]),l("span",Ul,n(("t"in a?a.t:e(t))("everyWeekday")),1)]),l("label",Vl,[d(l("input",{type:"radio",class:"radio radio-sm radio-primary",name:"frequency",value:e(B).EveryDay,"onUpdate:modelValue":s[17]||(s[17]=o=>c(_)?_.value=o:null)},null,8,jl),[[T,e(_)]]),l("span",Il,n(("t"in a?a.t:e(t))("everyDay")),1)])])])):U("",!0),l("p",Cl,[e(O)?U("",!0):(S(),$("label",Dl,[l("button",{onClick:X,type:"button",class:"p-3 bg-slate-900 hover:bg-slate-700 border-0 focus:outline-none font-bold text-yellow-300 w-full"},n(("t"in a?a.t:e(t))("nuke")),1)]))])],2)],64)}}}),xl={},ql={class:"flex flex-col"},Fl={class:"mt-8"};function Ll(A,v){const y=ye,N=Ol;return S(),$("div",ql,[D(y,null,{default:z(()=>[V(n(("t"in A?A.t:e(t))("nuclear")),1)]),_:1}),l("p",null,n(("t"in A?A.t:e(t))("nuclearDescription")),1),D(N),l("p",Fl,[l("small",null,n(("t"in A?A.t:e(t))("nuclearDescriptionWarning")),1)])])}const Xl=fe(xl,[["render",Ll]]);export{Xl as default};
