import{_ as $}from"./SfFavicon.vue_vue_type_script_setup_true_lang-xL4UatUz.js";import{_ as N}from"./Alert.vue_vue_type_script_setup_true_lang-f_OBNziH.js";import{aT as A,w as T,ac as M,ak as L,ah as g,an as c,aE as o,aM as P,av as a,aq as V,au as w,ad as t,G as s,at as E,ax as d,ay as n,aG as m,aw as F,aA as H,aH as k}from"./_virtual_wxt-plugins-DZjI-rY3.js";import{u as O}from"./useAddAllowedPatternMutation-BUZQGU94.js";import{u as R}from"./useMutation-RL6hm5Ow.js";import{p as G}from"./immer-CwDZyRGJ.js";import{u as Y}from"./useGetNuclearTimerQuery-C0YoNoTy.js";import{b as q}from"./tailwind-Be1c9XZh.js";import{C as y}from"./close-C3-Ad9eT.js";import{B as x}from"./bin-Fh_MlTbd.js";import{u as z}from"./useConfirmationStore-zY7by6Ys.js";import{_ as Q}from"./HeaderItem-C3BiIv3w.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PlatformIcon.vue_vue_type_script_setup_true_lang-BkEQwird.js";import"./dialogWithOptionsStore-7Z99EG-6.js";function j(){const{state:i}=A(T);return R({mutationFn:async({pattern:l})=>{let r=!1;const p=G(i.value,_=>{const f=_.findIndex(v=>v==l);f!=-1&&(_.splice(f,1),r=!0)});r&&(i.value=p)}})}const J=["disabled","placeholder"],K=["value","disabled"],X={key:1,class:"mt-3"},Z={class:"w-full border border-neutral-400 list-none px-0 mt-4 min-h-9 rounded",id:"allowedSitesList"},tt={key:0,class:"m-auto p-2"},et=["onClick"],st={class:"inline-block ml-1 align-text-bottom"},it={class:"mt-3"},nt=M({__name:"WhitelistInput",setup(i){const l=L(),{state:r}=A(T),{mutate:p}=O(),{mutate:_}=j(),{data:f}=Y(),v=z(),h=g(()=>!!f.value),S=g(()=>r.value.length==0);async function W(){if(l.value){const e=l.value.split(`
`);e.forEach(b=>p({pattern:b})),l.value=void 0,k.track("ADD_WEBSITES_TO_WHITELIST",{count_of_websites:e.length.toString()})}}async function C(e){_({pattern:e}),k.track("DELETE_WEBSITE_FROM_WHITELIST")}function D(){v.show({title:s("clearWhitelist"),message:s("areYouSureClearWhitelist"),positiveButtonText:s("clearAll"),destructive:!0,onClickPositive(){return r.value=[],!0},negativeButtonText:s("cancel")})}return(e,b)=>{const B=N,I=$;return o(),c("div",null,[P(a("textarea",{"data-testid":"allowed-sites-textarea",class:"textarea textarea-bordered w-full",disabled:t(h),placeholder:("t"in e?e.t:t(s))("enterSitesHere"),"onUpdate:modelValue":b[0]||(b[0]=u=>l.value=u)},null,8,J),[[q,l.value]]),a("input",{type:"button",value:("t"in e?e.t:t(s))("addAllowedSites"),class:"btn btn-sm btn-primary mt-2 uppercase",disabled:t(h),"data-testid":"add-allowed-sites-btn",onClick:W},null,8,K),t(h)?(o(),V(B,{key:0,type:"error"},{default:E(()=>[d(n(("t"in e?e.t:t(s))("cannotAddAllowedSitesDuringNuclearOption")),1)]),_:1})):(o(),c("p",X,[d(n(("t"in e?e.t:t(s))("removeSitesDescription1"))+" ",1),m(t(y),{class:"h-5 w-5 text-error align-middle inline-block"}),d(" "+n(("t"in e?e.t:t(s))("removeSitesDescription2")),1)])),a("ul",Z,[t(S)?(o(),c("p",tt,n(("t"in e?e.t:t(s))("noSitesYet")),1)):w("",!0),(o(!0),c(F,null,H(t(r),u=>(o(),c("li",{class:"mt-1 mb-1 ml-2 flex items-center",key:u},[t(h)?w("",!0):(o(),c("button",{key:0,class:"btn btn-sm btn-ghost btn-circle",onClick:dt=>C(u)},[m(t(y),{class:"h-5 w-5 cursor-pointer align-middle text-error inline-block","data-url":"website"})],8,et)),m(I,{"app-id":u,size:24,class:"icon align-sub"},null,8,["app-id"]),a("p",st,n(u),1)]))),128))]),t(S)?w("",!0):(o(),c("button",{key:2,onClick:D,class:"btn btn-outline btn-error btn-sm mt-4 not-prose uppercase"},[m(t(x),{class:"h-5 w-5 align-text-bottom"}),d(" "+n(("t"in e?e.t:t(s))("clearAll")),1)])),a("p",it,[a("small",null,n(("t"in e?e.t:t(s))("removeSitesAtAnyTime")),1)])])}}}),at={},ot={class:"flex flex-col"},lt={class:"mt-0"},rt={class:"list-disc text-sm mt-4 ml-3 text-info"},ct={class:"mt-2"};function ut(i,l){const r=Q,p=nt;return o(),c("div",ot,[m(r,null,{default:E(()=>[d(n(("t"in i?i.t:t(s))("whitelist")),1)]),_:1}),a("div",lt,[d(n(("t"in i?i.t:t(s))("whitelistAddingSiteDescription"))+" ",1),a("ul",rt,[a("li",null,n(("t"in i?i.t:t(s))("whitelistAddingSiteRule1")),1),a("li",ct,n(("t"in i?i.t:t(s))("whitelistAddingSiteRule2")),1)])]),m(p,{class:"mt-4"})])}const Wt=U(at,[["render",ut]]);export{Wt as default};
