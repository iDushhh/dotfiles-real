import{_ as g}from"./PlatformIcon.vue_vue_type_script_setup_true_lang-BkEQwird.js";import{ac as _,aT as h,B as w,ah as I,aZ as k,an as y,aq as U,ad as n,aE as p,cG as i,ds as v,$ as S}from"./_virtual_wxt-plugins-DZjI-rY3.js";const G=["src","alt"],E=_({__name:"SfFavicon",props:{appId:{},platform:{},appName:{},iconUrl:{},size:{}},setup(m){const t=m,{state:l}=h(w),f=I(()=>t.platform??i.Web),u=o=>`https://www.google.com/s2/favicons?domain=https://${o}&sz=${t.size??96}`,s=async o=>{const e=u(o);return await d(e)?e:void 0},r=k(async()=>{var o;if(t.platform==i.Android&&t.iconUrl)return t.iconUrl;if(t.appName){const e=l.value.find(a=>a.name==t.appName);if(e){const a=v(e);if(a)return a;const c=(o=S(e.websites[0]))==null?void 0:o.hostname;if(c)return await s(c)}}return await s(t.appId)});function d(o){return new Promise(e=>{const a=new Image;a.addEventListener("load",()=>e(a.width!==16),{once:!0}),a.addEventListener("error",()=>e(!1),{once:!0}),a.src=o})}return(o,e)=>{const a=g;return n(r)?(p(),y("img",{key:0,src:n(r),alt:`Favicon for ${o.appId}`},null,8,G)):(p(),U(a,{key:1,class:"icon opacity-icon shrink-0",platform:n(f)},null,8,["platform"]))}}});export{E as _};
