import{aT as P,dk as x,dl as T,aO as A,ac as g,an as r,aE as n,au as p,av as l,ad as t,ax as b,ay as i,G as a,dm as F,aG as u,ca as $,cb as I,aq as y,aw as G,aA as L,aC as N,at as B,aH as E}from"./_virtual_wxt-plugins-DZjI-rY3.js";import{s as V}from"./messaging-Z1Z126pc.js";import{u as M}from"./useMutation-RL6hm5Ow.js";import{_ as O}from"./PlatformIcon.vue_vue_type_script_setup_true_lang-BkEQwird.js";import{a as R,u as U,_ as W,b as H,c as q}from"./useJoinDeviceGroup-5-tEJJ0z.js";import{u as J}from"./useConfirmationStore-zY7by6Ys.js";import{s as K,a as Q,_ as j}from"./stayfree-pairing-track-cross-devices-B2sqJefJ.js";import{_ as z}from"./HeaderItem-C3BiIv3w.js";import{P as X}from"./plus-DKeKW68_.js";import{a as Y}from"./useShowPairingDialogStore-C9bRg8XT.js";import"./tailwind-Be1c9XZh.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dialogWithOptionsStore-7Z99EG-6.js";function Z(){return P(x(T.SessionsLastUploadedAt,{fallback:null}))}function ee(){const _=A();return M({mutationFn:async()=>{await _.usage.uploadAll()}})}const te={class:"flex gap-3"},se={key:0,class:"text-sm"},ne=g({__name:"UsageLastSynced",setup(_){const{mutate:c}=ee(),{state:o}=Z();function m(){c(),V("clear-cache",!0)}return(s,e)=>(n(),r("div",te,[t(o)?(n(),r("p",se,[b(i(("t"in s?s.t:t(a))("usageLastSynced"))+" ",1),l("span",null,i(("formatTimeAsTimeOfDay"in s?s.formatTimeAsTimeOfDay:t(F))(t(o))),1)])):p("",!0),l("a",{class:"text-sm link link-hover link-primary",onClick:m},i(("t"in s?s.t:t(a))("syncNow"))+"?",1)]))}}),ae={class:"group flex items-center space-x-4 px-4 py-2 rounded-lg hover:ring-1 hover:ring-base-content hover:ring-opacity-15"},oe={class:"flex flex-col flex-grow"},ie={class:"text-base-content text-lg"},re={key:0,class:"text-xs uppercase py-0.5 px-1 ml-2 rounded-sm font-bold bg-primary text-primary-content"},ce={class:"text-base-content text-opacity-secondary font-mono pb-1 text-sm"},le=g({name:"DeviceListItem",__name:"DeviceListItem",props:{name:{},installId:{},isCurrentDevice:{type:Boolean}},emits:["remove"],setup(_,{emit:c}){const o=_,m=c;function s(){m("remove",o.installId)}return(e,k)=>(n(),r("div",ae,[u(O,{class:"icon opacity-icon shrink-0",platform:e.name,"show-extension-icon":!0},null,8,["platform"]),l("div",oe,[l("p",ie,[l("span",null,i(e.name.trim()||("t"in e?e.t:t(a))("unknownDeviceName")),1),e.isCurrentDevice?(n(),r("span",re,i(("t"in e?e.t:t(a))("thisDevice")),1)):p("",!0)]),l("p",ce,i(e.installId),1)]),e.isCurrentDevice?(n(),r("button",{key:0,class:"btn btn-outline btn-error btn-sm mt-3 not-prose float-right uppercase m-auto",onClick:s},i(("t"in e?e.t:t(a))("unlink")),1)):p("",!0)]))}}),me={key:0,class:"mt-3"},ue=g({__name:"DeviceList",setup(_){const c=R(),{deviceGroup:o}=$(I()),{kickedFromGroup:m,removeDevice:s}=I(),{devices:e,isFetching:k,isError:h}=U(o),d=J();async function D(f){d.show({title:a("genericConfirmation"),message:a("removeDeviceConfirmationMessage"),positiveButtonText:a("unlink"),destructive:!0,async onClickPositive(){return await s({installIdToRemove:f,deviceGroupKey:o.value.key}),f==c.value&&await m(),!0},negativeButtonText:a("cancel")})}return(f,de)=>{const S=W,w=le,C=ne;return t(h)?p("",!0):(n(),r("div",me,[t(k)?(n(),y(S,{key:0})):(n(!0),r(G,{key:1},L(t(e),v=>(n(),y(w,{key:v.install_id,name:v.name,"install-id":v.install_id,"is-current-device":t(c)===v.install_id,onRemove:D},null,8,["name","install-id","is-current-device"]))),128)),t(o)?(n(),y(C,{key:2,class:"mt-2"})):p("",!0)]))}}}),pe={class:"flex flex-col"},_e={key:0},xe=g({__name:"stayfree-pairing",setup(_){const c=Y(),o=[{src:K,title:a("pairingPromo_sharedUsageLimit")},{src:Q,title:a("pairingPromo_trackAcrossAllDevices")}];function m(){c.show({}),E.track("SHOW_PAIRING_DEVICE_VIEW")}const{remoteDeviceGroup:s}=H();return q(s),(e,k)=>{const h=z,d=N("i18n-t"),D=j,f=ue;return n(),r("div",pe,[u(h,null,{default:B(()=>[b(i(("t"in e?e.t:t(a))("stayFreePairing")),1)]),_:1}),t(s)?p("",!0):(n(),r("div",_e,[u(d,{tag:"div","key-value":"stayFreePairingDescription",class:"text-base-content"}),u(d,{tag:"div","key-value":"stayFreePairingFeatures",class:"mt-4 text-base-content"}),u(d,{tag:"div","key-value":"installStayFree",class:"mt-4 text-base-content"}),u(D,{images:o})])),t(s)?(n(),y(f,{key:1})):p("",!0),l("div",null,[l("button",{class:"btn btn-sm mt-2 btn-primary uppercase text-ellipsis",onClick:m,"data-testid":"open-pairing-dialog"},[u(t(X),{class:"h-5 w-5 shrink-0 inline"}),b(" "+i(("t"in e?e.t:t(a))("pairing_pairNewDevice")),1)])])])}}});export{xe as default};
